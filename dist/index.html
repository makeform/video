<div><style type="text/css">video{max-width:100%;max-height:80vh;width:100%}</style><script type="@plotdb/block">module.exports={pkg:{name:"@makeform/video",extend:{name:"@makeform/upload"},i18n:{en:{"檔案不支援":"file format: Please upload a video file in mp4 format with h.264 encoding."},"zh-TW":{"檔案不支援":"檔案格式不符：請上傳使用 mp4 格式，並且採用 h.264 編碼的影片檔。"}},dependencies:[{url:"https://cdn.jsdelivr.net/npm/mux.js@6.0.1/dist/mux.min.js"}]},init:function(e){var r,n,t,o,u,i,a,c;r=e.ctx,n=e.root,t=e.parent,o=e.t;u=r.muxjs;i=function(t,e,r){return new Promise(function(e,r){var n;n=new FileReader;n.onload=function(){return e(n.result)};n.onerror=function(){return r(n.error)};return n.readAsArrayBuffer(t)})};a=function(e){return Promise.resolve().then(function(){return i(e,0,Math.min(e.size,10*1024*1024))}).then(function(e){var r,n,t,i;e=new Uint8Array(e);r=u.mp4.probe.tracks(e);n=r.filter(function(e){return e.type==="video"}).map(function(e){return e.codec});t=r.filter(function(e){return e.type==="audio"}).map(function(e){return e.codec});i=!(n.length||t.length)?false:!n.filter(function(e){return!/avc1/.exec(e)}).length&&!t.filter(function(e){return!/mp3|mp4|flac|aac/.exec(e)}).length;return{video:n,audio:t,supported:i,message:o("檔案不支援")}})};c=new ldview({root:n,ctx:{},handler:{video:{list:function(e){var r,n;r=e.ctx;n=r.file;if(Array.isArray(n)){return n}else if(n){return[n]}else{return[]}},view:{handler:{source:function(e){var r,n;r=e.node,n=e.ctx;return r.setAttribute("src",n.url)}}}}}});return t.ext({view:c,isSupported:a})}};</script><div plug="preview"><div class="mb-2 w-100" ld-each="video"><video class="rounded" controls><source ld="source" type="video/mp4"></video></div></div></div>
