<div><style type="text/css">video{max-width:100%;max-height:80vh;width:100%}</style><script type="@plotdb/block">module.exports={pkg:{name:"@makeform/video",extend:{name:"@makeform/upload"},i18n:{en:{"檔案不支援":"file is not supported"},"zh-TW":{"檔案不支援":"檔案不支援"}},dependencies:[{url:"https://cdn.jsdelivr.net/npm/mux.js@6.0.1/dist/mux.min.js"}]},init:function(e){var r,n,t,u,i,o,c;r=e.ctx,n=e.root,t=e.parent;u=r.muxjs;i=function(i,u,o){return new Promise(function(e,r){var n,t;n=new FileReader;t=i.slice(u,o);n.onload=function(){return e(n.result)};n.onerror=function(){return r(n.error)};return n.readAsArrayBuffer(t)})};o=function(e){return Promise.resolve().then(function(){return i(e,0,Math.min(e.size,1024*1024))}).then(function(e){var r,n,t,i;e=new Uint8Array(e);r=u.mp4.probe.tracks(e);n=r.filter(function(e){return e.type==="video"}).map(function(e){return e.codec});t=r.filter(function(e){return e.type==="audio"}).map(function(e){return e.codec});i=!(n.length||t.length)?false:!n.filter(function(e){return!/avc1/.exec(e)}).length&&!t.filter(function(e){return!/mp3|mp4|flac|aac/.exec(e)}).length;return{video:n,audio:t,supported:i}})};c=new ldview({root:n,ctx:{},handler:{video:{list:function(e){var r,n;r=e.ctx;n=r.file;if(Array.isArray(n)){return n}else if(n){return[n]}else{return[]}},view:{handler:{source:function(e){var r,n;r=e.node,n=e.ctx;return r.setAttribute("src",n.url)}}}}}});return t.ext({view:c,isSupported:o})}};</script><div plug="preview"><div class="mb-2 w-100" ld-each="video"><video class="rounded" controls><source ld="source" type="video/mp4"></video></div></div></div>
