<div><style type="text/css">video{max-width:100%;max-height:80vh;width:100%}</style><script type="@plotdb/block">module.exports={pkg:{name:"@makeform/video",extend:{name:"@makeform/upload"},i18n:{en:{"檔案不支援":"file is not supported"},"zh-TW":{"檔案不支援":"檔案不支援"}},dependencies:[{url:"https://cdn.jsdelivr.net/npm/mux.js@6.0.1/dist/mux.min.js"}]},init:function(e){var r,n,t,c,i,u;r=e.ctx,n=e.root,t=e.parent;c=r.muxjs;i=function(e){return new Promise(function(u,r){var o,n;try{o=new FileReader;o.onload=function(){var e,r,n,t,i;e=new Uint8Array(o.result);r=c.mp4.probe.tracks(e);n=r.filter(function(e){return e.type==="video"}).map(function(e){return e.codec});t=r.filter(function(e){return e.type==="audio"}).map(function(e){return e.codec});if(!(n.length||t.length)){i=false}else{i=!n.filter(function(e){return!/avc1/.exec(e)}).length&&!t.filter(function(e){return!/mp3|mp4|flac|aac/.exec(e)}).length}return u({video:n,audio:t,supported:i})};return o.readAsArrayBuffer(e)}catch(e){n=e;return r(n)}})};u=new ldview({root:n,ctx:{},handler:{video:{list:function(e){var r,n;r=e.ctx;n=r.file;if(Array.isArray(n)){return n}else if(n){return[n]}else{return[]}},view:{handler:{source:function(e){var r,n;r=e.node,n=e.ctx;return r.setAttribute("src",n.url)}}}}}});return t.ext({view:u,isSupported:i})}};</script><div plug="preview"><div class="mb-2 w-100" ld-each="video"><video class="rounded" controls><source ld="source" type="video/mp4"></video></div></div></div>
